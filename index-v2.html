<!-- ğŸ“„ index-v2.html -->
<!-- Ù†Ø³Ø®Ø© Ù…Ø­Ø³Ù‘Ù†Ø© Ù…Ù† index.html Ù…Ø¹ Ø¯Ù…Ø¬ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© -->

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ù†Ø¸Ø§Ù… 5A Ø§Ù„Ø°ÙƒÙŠ Ù„ØªØ­Ù„ÙŠÙ„ ØªØ³Ø¯ÙŠØ¯Ø§Øª Ø§Ù„Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ - Ø¢Ù…Ù† ÙˆØ³Ø±ÙŠØ¹">
    <meta name="theme-color" content="#1a1a2e">
    
    <title>Ù†Ø¸Ø§Ù… 5A AI - ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ Ø§Ù„Ø°ÙƒÙŠ</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="5A-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75' fill='%231a1a2e'>â—¯</text></svg>">
    
    <style>
        /* Ù…Ø­Ø³Ù‘Ù†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© */
        :root {
            --primary: #00d4ff;
            --secondary: #ff006e;
            --success: #06ffa5;
            --warning: #ffb703;
            --error: #fb5607;
            --dark: #1a1a2e;
            --light: #f5f5f5;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--dark);
            color: #fff;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        
        /* Progress Bar Ù…Ø­Ø³Ù‘Ù† */
        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(0, 212, 255, 0.2);
            position: fixed;
            top: 0;
            left: 0;
            transition: width 0.3s ease;
            z-index: 1000;
        }
        
        .progress-bar.active {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* Notifications Ù…Ø­Ø³Ù‘Ù† */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease;
            z-index: 9999;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .notification.success {
            background: rgba(6, 255, 165, 0.1);
            border-left: 4px solid var(--success);
            color: var(--success);
        }
        
        .notification.error {
            background: rgba(251, 86, 7, 0.1);
            border-left: 4px solid var(--error);
            color: var(--error);
        }
        
        .notification.info {
            background: rgba(0, 212, 255, 0.1);
            border-left: 4px solid var(--primary);
            color: var(--primary);
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Accessibility Ù…Ø­Ø³Ù‘Ù† */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        
        button:focus, input:focus, select:focus {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }
        
        /* Tabs Ù…Ø­Ø³Ù‘Ù† */
        [role="tab"][aria-selected="true"] {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
        }
        
        [role="tabpanel"] {
            display: none;
        }
        
        [role="tabpanel"][aria-selected="true"],
        [role="tabpanel"].active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Progress Bar -->
    <div class="progress-bar" id="progressBar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
    
    <!-- Header -->
    <header role="banner">
        <div class="header-content">
            <h1>
                <span class="logo-icon">â—¯</span>
                Ù†Ø¸Ø§Ù… 5A AI
                <span class="logo-version">v2.0</span>
            </h1>
            <p class="subtitle">Ù†Ø¸Ø§Ù… Ø°ÙƒÙŠ Ù„ØªØ­Ù„ÙŠÙ„ ØªØ³Ø¯ÙŠØ¯Ø§Øª Ø§Ù„Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ</p>
        </div>
    </header>
    
    <!-- Navigation -->
    <nav role="navigation" class="main-nav">
        <button class="nav-btn active" data-tab="analysis" role="tab" aria-selected="true" aria-controls="analysisPanel">
            <i class="fas fa-flask"></i>
            Ø§Ù„ØªØ­Ù„ÙŠÙ„
        </button>
        <button class="nav-btn" data-tab="library" role="tab" aria-selected="false" aria-controls="libraryPanel">
            <i class="fas fa-book"></i>
            Ø§Ù„Ù…ÙƒØªØ¨Ø©
        </button>
        <button class="nav-btn" data-tab="settings" role="tab" aria-selected="false" aria-controls="settingsPanel">
            <i class="fas fa-cogs"></i>
            Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        </button>
    </nav>
    
    <!-- Main Content -->
    <main role="main" class="main-container">
        <!-- Analysis Tab -->
        <section id="analysisPanel" role="tabpanel" aria-labelledby="analysisTab" class="tab-content active">
            <div class="container">
                <h2>ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¶Ø±Ø¨Ø©</h2>
                
                <form id="shotForm" novalidate>
                    <fieldset>
                        <legend>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¶Ø±Ø¨Ø©</legend>
                        
                        <!-- Rails -->
                        <div class="form-group">
                            <label for="railsInput" aria-label="Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ø¯Ø±Ø§Ù†">
                                <i class="fas fa-border-none"></i>
                                Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ø¯Ø±Ø§Ù†
                            </label>
                            <select id="railsInput" name="rails" required aria-describedby="railsHelp">
                                <option value="">Ø§Ø®ØªØ± Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ø¯Ø±Ø§Ù†</option>
                                <option value="1">Ø¬Ø¯Ø§Ø± ÙˆØ§Ø­Ø¯</option>
                                <option value="2">Ø¬Ø¯Ø§Ø±Ø§Ù†</option>
                                <option value="3">Ø«Ù„Ø§Ø«Ø© Ø¬Ø¯Ø±Ø§Ù†</option>
                                <option value="4">Ø£Ø±Ø¨Ø¹Ø© Ø¬Ø¯Ø±Ø§Ù†</option>
                                <option value="5">Ø®Ù…Ø³Ø© Ø¬Ø¯Ø±Ø§Ù† ÙØ£ÙƒØ«Ø±</option>
                            </select>
                            <small id="railsHelp">Ø§Ø®ØªØ± Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ø¯Ø±Ø§Ù† Ø§Ù„ØªÙŠ Ø³ØªÙ„Ù…Ø³Ù‡Ø§ Ø§Ù„ÙƒØ±Ø©</small>
                        </div>
                        
                        <!-- White Ball Measurement -->
                        <div class="form-group">
                            <label for="whiteBallInput" aria-label="Ù‚ÙŠØ§Ø³ Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡">
                                <i class="fas fa-circle"></i>
                                Ù‚ÙŠØ§Ø³ Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ (Ø³Ù…)
                            </label>
                            <input 
                                type="number" 
                                id="whiteBallInput" 
                                name="whiteBall" 
                                min="0" 
                                max="10" 
                                step="0.1" 
                                required
                                aria-describedby="whiteBallHelp"
                                aria-label="Ø£Ø¯Ø®Ù„ Ù‚ÙŠØ§Ø³ Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ Ø¨Ø§Ù„Ø³Ù†ØªÙŠÙ…ØªØ±"
                            >
                            <small id="whiteBallHelp">Ø£Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠØ§Ø³ Ù…Ù† 0 Ø¥Ù„Ù‰ 10 Ø³Ù…</small>
                        </div>
                        
                        <!-- Aim Measurement -->
                        <div class="form-group">
                            <label for="aimInput" aria-label="Ù‚ÙŠØ§Ø³ Ø§Ù„Ù‡Ø¯Ù">
                                <i class="fas fa-crosshairs"></i>
                                Ù‚ÙŠØ§Ø³ Ø§Ù„Ù‡Ø¯Ù (Ø¯Ø±Ø¬Ø©)
                            </label>
                            <input 
                                type="number" 
                                id="aimInput" 
                                name="aim" 
                                min="0" 
                                max="180" 
                                step="0.5" 
                                required
                                aria-describedby="aimHelp"
                                aria-label="Ø£Ø¯Ø®Ù„ Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ù‡Ø¯Ù Ø¨Ø§Ù„Ø¯Ø±Ø¬Ø§Øª"
                            >
                            <small id="aimHelp">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ù…Ù† 0 Ø¥Ù„Ù‰ 180 Ø¯Ø±Ø¬Ø©</small>
                        </div>
                        
                        <!-- Cue Measurement -->
                        <div class="form-group">
                            <label for="cueInput" aria-label="Ù‚ÙˆØ© Ø§Ù„Ø¶Ø±Ø¨Ø©">
                                <i class="fas fa-bolt"></i>
                                Ù‚ÙˆØ© Ø§Ù„Ø¶Ø±Ø¨Ø© (1-10)
                            </label>
                            <input 
                                type="range" 
                                id="cueInput" 
                                name="cue" 
                                min="1" 
                                max="10" 
                                value="5"
                                aria-describedby="cueHelp"
                                aria-label="Ø§Ø³Ø­Ø¨ Ù„Ø§Ø®ØªÙŠØ§Ø± Ù‚ÙˆØ© Ø§Ù„Ø¶Ø±Ø¨Ø©"
                            >
                            <span id="cueValue">5</span>
                            <small id="cueHelp">Ø£Ø¶Ø¹Ù (1) â† Ù…ØªÙˆØ³Ø· (5) â† Ø§Ù„Ø£Ù‚ÙˆÙ‰ (10)</small>
                        </div>
                        
                        <!-- Notes -->
                        <div class="form-group">
                            <label for="notesInput" aria-label="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©">
                                <i class="fas fa-sticky-note"></i>
                                Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
                            </label>
                            <textarea 
                                id="notesInput" 
                                name="notes" 
                                rows="3" 
                                maxlength="200"
                                aria-describedby="notesHelp"
                                aria-label="Ø£Ø¶Ù Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ø­ÙˆÙ„ Ø§Ù„Ø¶Ø±Ø¨Ø©"
                                placeholder="Ø£Ø¯Ø®Ù„ Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©..."></textarea>
                            <small id="notesHelp">Ø­Ø¯ Ø£Ù‚ØµÙ‰ 200 Ø­Ø±Ù</small>
                        </div>
                    </fieldset>
                    
                    <!-- Buttons -->
                    <div class="button-group">
                        <button type="submit" id="analyzeBtn" class="btn btn-primary" aria-label="ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¶Ø±Ø¨Ø©">
                            <i class="fas fa-play-circle"></i>
                            ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¶Ø±Ø¨Ø©
                        </button>
                        <button type="button" id="saveBtn" class="btn btn-success" aria-label="Ø­ÙØ¸ Ø§Ù„Ø¶Ø±Ø¨Ø©">
                            <i class="fas fa-save"></i>
                            Ø­ÙØ¸
                        </button>
                        <button type="reset" id="clearBtn" class="btn btn-secondary" aria-label="Ù…Ø³Ø­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬">
                            <i class="fas fa-redo"></i>
                            Ù…Ø³Ø­
                        </button>
                    </div>
                </form>
                
                <!-- Analysis Results -->
                <div id="analysisResults" class="results-container" role="region" aria-live="polite" aria-label="Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„"></div>
            </div>
        </section>
        
        <!-- Library Tab -->
        <section id="libraryPanel" role="tabpanel" aria-labelledby="libraryTab" class="tab-content">
            <div class="container">
                <h2>Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¶Ø±Ø¨Ø§Øª</h2>
                
                <!-- Search -->
                <div class="search-container">
                    <input 
                        type="text" 
                        id="librarySearch" 
                        placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¶Ø±Ø¨Ø©..."
                        aria-label="Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…ÙƒØªØ¨Ø©"
                        aria-describedby="searchHelp"
                    >
                    <small id="searchHelp">Ø§Ø¨Ø­Ø« Ø­Ø³Ø¨ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø£Ùˆ Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ø¯Ø±Ø§Ù† Ø£Ùˆ Ø§Ù„Ù‚ÙˆØ©</small>
                </div>
                
                <!-- Filters -->
                <div class="filter-buttons" role="group" aria-label="ØªØµÙÙŠØ© Ø§Ù„Ø¶Ø±Ø¨Ø§Øª">
                    <button class="filter-btn active" data-filter="all">
                        <span class="badge">Ø§Ù„ÙƒÙ„</span>
                    </button>
                    <button class="filter-btn" data-filter="1">
                        <span class="badge">1 Ø¬Ø¯Ø§Ø±</span>
                    </button>
                    <button class="filter-btn" data-filter="2">
                        <span class="badge">2 Ø¬Ø¯Ø§Ø±</span>
                    </button>
                    <button class="filter-btn" data-filter="3+">
                        <span class="badge">3+ Ø¬Ø¯Ø±Ø§Ù†</span>
                    </button>
                </div>
                
                <!-- Shots List -->
                <div id="shotsList" class="shots-list" role="list" aria-label="Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¶Ø±Ø¨Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©"></div>
            </div>
        </section>
        
        <!-- Settings Tab -->
        <section id="settingsPanel" role="tabpanel" aria-labelledby="settingsTab" class="tab-content">
            <div class="container">
                <h2>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
                
                <fieldset>
                    <legend>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</legend>
                    
                    <div class="form-group">
                        <label for="themeSwitch">
                            <input type="checkbox" id="themeSwitch" aria-label="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">
                            Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label for="autoSaveCheck">
                            <input type="checkbox" id="autoSaveCheck" checked aria-label="Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ">
                            Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ
                        </label>
                    </div>
                    
                    <div class="button-group">
                        <button id="exportBtn" class="btn btn-info" aria-label="ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª">
                            <i class="fas fa-download"></i>
                            ØªØµØ¯ÙŠØ±
                        </button>
                        <button id="importBtn" class="btn btn-info" aria-label="Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª">
                            <i class="fas fa-upload"></i>
                            Ø§Ø³ØªÙŠØ±Ø§Ø¯
                        </button>
                        <button id="clearDataBtn" class="btn btn-danger" aria-label="Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª">
                            <i class="fas fa-trash"></i>
                            Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                        </button>
                    </div>
                </fieldset>
                
                <!-- About -->
                <div class="about-section">
                    <h3>Ø­ÙˆÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h3>
                    <p><strong>Ø§Ù„Ø¥ØµØ¯Ø§Ø±:</strong> 2.0.0</p>
                    <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> Ø¢Ù…Ù† ÙˆØ³Ø±ÙŠØ¹ âœ…</p>
                    <p><strong>Ø§Ù„Ù…ÙŠØ²Ø§Øª:</strong></p>
                    <ul>
                        <li>âœ“ ØªØ­Ù„ÙŠÙ„ Ø°ÙƒÙŠ Ù„Ù„Ø¶Ø±Ø¨Ø§Øª</li>
                        <li>âœ“ Ù…ÙƒØªØ¨Ø© Ø¢Ù…Ù†Ø© Ù„Ù„Ø¶Ø±Ø¨Ø§Øª</li>
                        <li>âœ“ Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ</li>
                        <li>âœ“ Ø¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª</li>
                        <li>âœ“ ÙˆØ§Ø¬Ù‡Ø© Ø³Ù‡Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Footer -->
    <footer role="contentinfo">
        <p>Â© 2024 Ù†Ø¸Ø§Ù… 5A AI | ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨Ø¹Ù†Ø§ÙŠØ©</p>
    </footer>
    
    <!-- Scripts - Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø­Ø³Ù‘Ù†Ø© -->
    <script src="security-utils.js"></script>
    <script src="system5a-storage.js"></script>
    <script src="system5a-state.js"></script>
    <script src="system5a-ui.js"></script>
    <script src="system5a-events.js"></script>
    <script src="5a-ai.js"></script>
    <script src="5a-core.js"></script>
    
    <!-- Initialization Script -->
    <script>
        // ØªÙ‡ÙŠØ¦Ø© Ø´Ø§Ù…Ù„Ø© ÙˆØ¢Ù…Ù†Ø©
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('ğŸš€ Ø¬Ø§Ø±ÙŠ ØªÙ‡ÙŠØ¦Ø© ØªØ·Ø¨ÙŠÙ‚ 5A v2.0...');
            
            try {
                // 1. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ†
                if (typeof StorageManager !== 'undefined') {
                    await StorageManager.initDatabase();
                    console.log('âœ“ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¬Ø§Ù‡Ø²Ø©');
                }
                
                // 2. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø­Ø§Ù„Ø©
                if (typeof StateManager !== 'undefined') {
                    await StateManager.loadFromStorage();
                    console.log('âœ“ Ø§Ù„Ø­Ø§Ù„Ø© ØªÙ… ØªØ­Ù…ÙŠÙ„Ù‡Ø§');
                }
                
                // 3. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
                if (typeof EventManager !== 'undefined') {
                    EventManager.initializeAllEvents();
                    console.log('âœ“ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø¬Ø§Ù‡Ø²Ø©');
                }
                
                // 4. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
                if (typeof System5A !== 'undefined') {
                    System5A.init();
                    console.log('âœ“ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø¬Ø§Ù‡Ø²');
                }
                
                // 5. ØªÙ‡ÙŠØ¦Ø© Service Worker Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª ØºÙŠØ± Ø§Ù„Ù…ØªØµÙ„Ø©
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register('service-worker.js')
                        .then(registration => {
                            console.log('âœ“ Service Worker Ù…Ø³Ø¬Ù„ Ø¨Ù†Ø¬Ø§Ø­');

                            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ ØªØ­Ø¯ÙŠØ«
                            registration.addEventListener('updatefound', () => {
                                const newWorker = registration.installing;
                                if (newWorker) {
                                    newWorker.addEventListener('statechange', () => {
                                        if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                            // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ«
                                            if (typeof UIManager !== 'undefined') {
                                                UIManager.showNotification(
                                                    'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ·Ø¨ÙŠÙ‚! Ø§Ø¶ØºØ· Ù„Ù„ØªØ­Ø¯ÙŠØ«',
                                                    'info',
                                                    10000,
                                                    () => {
                                                        newWorker.postMessage({ type: 'SKIP_WAITING' });
                                                        window.location.reload();
                                                    }
                                                );
                                            }
                                        }
                                    });
                                }
                            });

                            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙƒÙ„ Ø³Ø§Ø¹Ø©
                            setInterval(() => {
                                registration.update();
                            }, 60 * 60 * 1000); // ÙƒÙ„ Ø³Ø§Ø¹Ø©
                        })
                        .catch(err => {
                            console.warn('âš ï¸ Service Worker ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… Ø£Ùˆ ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„:', err.message);
                        });
                }
                
                console.log('âœ… ØªØ·Ø¨ÙŠÙ‚ 5A Ø¬Ø§Ù‡Ø² ØªÙ…Ø§Ù…Ø§Ù‹ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…!');
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©:', error);
                if (typeof UIManager !== 'undefined') {
                    UIManager.showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚', 'error');
                }
            }
            
            // Cleanup Ø¹Ù†Ø¯ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø©
            window.addEventListener('beforeunload', () => {
                if (typeof EventManager !== 'undefined') {
                    EventManager.cleanup();
                }
                if (typeof StateManager !== 'undefined' && typeof StateManager.saveToStorage === 'function') {
                    StateManager.saveToStorage();
                }
            });
        });
        
        // Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù…
        window.addEventListener('error', function(event) {
            console.error('âŒ Ø®Ø·Ø£ Ø¹Ø§Ù…:', event.error);
            if (typeof UIManager !== 'undefined') {
                UIManager.showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚', 'error');
            }
        });
        
        // Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ØºÙŠØ± Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
        window.addEventListener('unhandledrejection', function(event) {
            console.error('âŒ Promise Ù…Ø±ÙÙˆØ¶Ø©:', event.reason);
            if (typeof UIManager !== 'undefined') {
                UIManager.showNotification('Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
            }
        });
    </script>
</body>
</html>
